# üö® –§–ò–ù–ê–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –û—à–∏–±–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞:**

–û—à–∏–±–∫–∞ "structure of query does not match function result type" –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `match_sketches` –≤ Supabase –∏–º–µ–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Ç–µ–º, —á—Ç–æ –æ–Ω–∞ –æ–±—ä—è–≤–ª—è–µ—Ç –≤ `RETURNS TABLE`, –∏ —Ç–µ–º, —á—Ç–æ –æ–Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç.

## üéØ **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ SQL –∑–∞–ø—Ä–æ—Å—ã –≤ Supabase SQL Editor:**

### **–ó–∞–ø—Ä–æ—Å 1: –¢–µ–∫—É—â–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**
```sql
SELECT pg_get_functiondef(oid)
FROM pg_proc
WHERE proname = 'match_sketches'
  AND pronamespace = (SELECT oid FROM pg_namespace WHERE nspname = 'public');
```

### **–ó–∞–ø—Ä–æ—Å 2: –¢–æ—á–Ω–∞—è —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã**
```sql
SELECT column_name, data_type, udt_name, is_nullable
FROM information_schema.columns 
WHERE table_name = 'sketches' 
  AND table_schema = 'public'
ORDER BY ordinal_position;
```

### **–ó–∞–ø—Ä–æ—Å 3: –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏ (–ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –æ—à–∏–±–∫—É)**
```sql
SELECT * FROM match_sketches(
  (SELECT embedding FROM sketches LIMIT 1),
  0.01,
  5
) LIMIT 1;
```

## üìã **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**

1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ 3 –∑–∞–ø—Ä–æ—Å–∞** –≤ Supabase SQL Editor –ø–æ –æ—á–µ—Ä–µ–¥–∏
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –ø–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
3. **–û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ 3, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –æ—à–∏–±–∫—É

## üéØ **–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**

–Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ç–æ—á–Ω–æ–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–æ–∑–¥–∞–º –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `match_sketches`.

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏!** üöÄ
